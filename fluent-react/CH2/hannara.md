> [!note]
> JSX는 자바스크립트의 확장구문(extension)이며 자바스크립트 XML이라고도 불립니다.

### 자바스크립트 XML?

Ajax시대에서 나온 **비동기 자바스크립트와 XML** 은 상태가 변경될 때마다 새로운 페이지를 읽어들여왔다.

**JSX는 개발자가 자바스크립트 코드 내에서 HTML과 유사한 코드를 작성할 수 있게 하는 자바스크립트용 구문 확장자** 입니다.

#### JSX , HTML 차이

- `{}` 를 사용한 HTML과 유사한 코드 내에서 자바스크립트 표현식을 삽입하느 ㄴ것
- 카멜 케이스로 작성되는 것
  - onclick -> onClick()

### JSX의 장점

- 더 쉬운 읽기, 쓰기
  - HTML에 익숙하다면 JSX문법을 더 쉽게 읽고 쓸수 있다.
- 향상된 보안
  - 새로운 에리먼트를 생성할 수 있는 `<, >`이 HTML문자열에 포함되어있다면 위험하지만,
  - JSX코드는 **컴파일할 때 다른 문자로 바꿔서 안전한 자바스크립트 코드를 생성**할 수 있다.
- 강력한 타이핑
  - 타입스크립트가 없이도 `JSDoc 스타일 주석`, `propTypes` 를 사용한 타입 안정성 향상
- 컴포넌트 기반 아키텍처
  - JSX는 컴포넌트 기반 아키텍처를 권장 -> 모듈화 , 유지보수성 향상
- 광범위한 사용
  - JSX는 리액트뿐만 아닌 다른 라이브러리, 프레임워크에서도 지원

### JSX의 약점

- 학습 곡선 가중
  - JSX가 익숙하지 않다면 배워야함
- 전용 도구 필요
  - JSX코드를 실행하기 위한 컴파일 도구가 추가되어야함
  - vue같은 프레임워크는 브라우저환경에서 script태그만 포함한다면 작동함
- 관심사 혼합
  - JSX가 HTML과 유사한 코드를 자바스크립트 코드에 결합해서 관심사를 혼합시킨다
  - 표현과 논리를 분리하기 어렵다고 주장하는 개발자가 있다.
- 자바스크립트 호환성 부족
  - JSX는 인라인 표현식을 지원하지만 **인라인 블록은 지원하지 않는다.**
  - JSX 트리 내부에는 인라인 표현식을 가질 수 있다. BUT `switch , if` 블록은 가질 수 없다.

### 2.4 내부 동작

#### JSX 코드는 어떻게 작동하는가?

```js
const a = 1;
let b = 2;

console.log(a + b); // 3
```

위 코드는 "텍스트"일 뿐이다.
컴퓨터는 이 텍스트 그대로를 이해할 수 없기에 **컴파일러**를 사용해 코드를 컴파일하여 알 수 있게 합니다.

> _"컴파일러"_ 는 특정 규칙에 따라 고급 프로그래밍 언어로 작성된 소스 코드를 _"구문 트리"_ 로 변환하는 소프트웨어

> _"구문 트리"_ 는 자바스크립트 객체 같은 트리 자료 구조이다.

자바스크립트에서 컴파일러는 3단계 과정을 거친다.

- 토큰화 (tokenization)
- 구문 분석 (parsing)
- 코드 생성 (code generation)

#### 토큰화

- 문자열을 의미 있는 토큰으로 분해하는 것
- _"렉서"_ = 토큰이 자신의 부모나 자식에 관한 상태를 포함하고 있는 토크나이저
- 렉서 규칙으로 문자열에서 변수 이름, 객체 키 및 값 같은 주요 토큰을 감지한다
- 렉서는 키워드를 "열거 가능한 값"으로 표현함

#### 구문 분석

토큰화 된 토큰을 가져와 구문 트리로 변화나는 과정.

- 문자열은 JSON객체가 됨

#### 코드 생성

컴파일러가 추상 구문 트리(AST)에서 기계어를 생성하는 과정

- 프로세서가 직접 실행할 수 있는 명령어로 AST의 코드를 변환하는 작업이 있음
- 생성된 기계어는 자바스크립트 엔진에 의해 실행됩
- AST를 기계어로 변환하는 과정은 복잡한데 최신 컴파일러들은 효율적이고 최적화된 코드를 생성할 수 있음

##### 컴파일러 종류

- 네이티브 컴파일러
  - 프로세서에서 실행할 수 있는 기계어 생성
  - 독립 실행형 애플리케이션, 시스템 수준의 소프트웨어를 만드는 데 사용
- 크로스 컴파일러
  - 실행중인 플랫폼과 다른 플랫폼용 기계어를 생성
  - 임베디드 개발, 특수 하드웨어 개발 때 사용
- JIT 컴파일러
  - 코드를 미리 변환하지 않고 실행할 때 기계어로 변환
  - 가상 머신에서 사용됨
  - 기존 인터프리터보다 성능이 좋음
  - 웹 브라우저에서 많이 사용됨
- 인터프리터
  - 컴파일 단계 없이 소스 코드를 직접 실행함
  - 일반적으로 컴파일러 보다 속도가 느리지만 유연성과 편의성이 우수하다

> 보통 자바스크립트 코드가 먼저 바이트 코드로 중간 변환되고 JIT컴파일러는 프로그램이 실행될 때 바이트 코드를 기계어로 "동적 컴파일" 된다.

##### 런타임

- 크롬 = 크로미움 런타임
- 서버 = Node.js
- 환경에 따른 다른 컨텍스트를 제공함

### JSX로 자바스크립트 구문 확장하기

구문을 확장하려면 _새로운 구문을 이해할 수 있는 다른 엔진이 있거나, 엔진보다 앞선 단계에서 구문을 처리해야하는데 새로운 구문을 처리하는 것이 더 쉽기에 이것을 채택_

렉서와 구문 분석기를 활용하여 자바스크립트 엔진이 이해할 수 있는 바닐라 JS를 생성한다 = **바벨**

![[스크린샷 2025-04-17 오후 3.49.01.png]]

- 이 과정을 거쳐야하기에 JSX는 브라우저에서 직접 사용 X
- 구문 분석기를 통한 구문트리로 컴파일하는 **빌드 단계**가 필요하고 이 과정을 거쳐서 번들에 포함되는 과정 => _트랜스파일한다_

### JSX 프라그마

```js
<MyComponent prop="속성값">컨텐츠</MyComponent>;

// javascript코드로 변환
React.createElement(MyComponent, { prop: "속성값" }, "컨텐츠");

// 태그, 속성, children이 어떻게 변환되었는지 확인
```

- JSX 프라그마는 모두 `<` 로 시작한다
  - 그러나 자바스크리브는 비교연산을 제외하면 인식하지 못하는 문자이다.
- 대표적인 예시 = use strict (구형 모듈, 리액트 서버 컴포넌트에 사용되는)
- **React.createElement 대신 < 문자를 사용하는 별칭**

### 표현식

```js
const a = 1;
const b = 2;

const MyComponent = () => <Box>{a + b}</Box>;
```

- 중광호 안의 내용이 표현식입니다.
- 표현식 안에서는 평가가 이루어질 수 있고, JSX엘리먼트 트리 내부에서는 문장은 실행하지 못합니다.

```js
const MyComponent = () => <Box>{
const a = 1;
const b = 2;

if(a>b) {
  3
}
}</Box>

// 실행되지 않음
// 아무런 값을 반환 X
```

### 복습

1. JSX란 무엇이며, 장단점은 무엇인가요?
   - 자바스크립트의 확장 구문이며 개발자가 자바스클비트 코드 내에서 HTML과 유사한 코드를 작성할 수 있게 하는 자바스크립트용 구문 확장자입니다.
2. JSX와 HTML의 차이점은 무엇인가요?
   - 중괄호를 사용하여 HTML과 유사한 코드 안에서 자바스크립트 표현식을 삽입할 수 있음
   - 논리적 표현식과 조건부 렌더링이 가능함
   - 카멜케이스로 작성되는 것
   - 컴파일 필요함
3. 텍스트 문자열은 어떻게 기계어가 되나요?
   - 컴파일러를 사용해 코드를 컴파일 함
   - 자바스크립트 컴파일 단계는 다음과 같습니다.
     - 토큰화
       - 문자열에 의미있는 토큰으로 분해
     - 구문분석
       - 토큰화된 토큰으로 구문트리로 변화
     - 코드생성
       - 컴파일러가 추상 구문 트리에서 기계어를 생성
4. JSX표현식이란 무엇이며 어떤 좋은 점이 있나요?
   - JSX내부에서 중괄호를 사용하여 JavaScript값을 삽입 또는 실행 가능한 표현식을 넣는 것
   - 동적인 UI 구현이 쉽다.
   - 조건부 렌더링을 사용할 수 있다.
   - JavaScript 기능을 그대로 사용할 수 있다.
